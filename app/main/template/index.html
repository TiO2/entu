<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="description" content="" />

        <title>{{ page_title }}</title>

        <link rel="shortcut icon" href="{{ static_url('images/favicons/favicon.png') }}" />
        <link rel="apple-touch-icon-precomposed" sizes="144x144" href="{{ static_url('images/favicons/apple-touch-icon-144-precomposed.png') }}">
        <link rel="apple-touch-icon-precomposed" sizes="114x114" href="{{ static_url('images/favicons/apple-touch-icon-114-precomposed.png') }}">
        <link rel="apple-touch-icon-precomposed" sizes="72x72" href="{{ static_url('images/favicons/apple-touch-icon-72-precomposed.png') }}">
        <link rel="apple-touch-icon-precomposed" href="{{ static_url('images/favicons/apple-touch-icon-57-precomposed.png') }}">

        <!-- jQuery & jQuery UI -->
        <script src="{{ static_url('frameworks/jquery/jquery-2.1.0.min.js') }}"></script>
        <script src="{{ static_url('frameworks/jquery/jquery-ui-1.9.2.min.js') }}"></script>

        <!-- Bootstrap & Font Awesome-->
        <link  href="{{ static_url('frameworks/bootstrap2/css/bootstrap.min.css') }}" rel="stylesheet" />
        <script src="{{ static_url('frameworks/bootstrap2/js/bootstrap.min.js') }}"></script>
        <link  href="{{ static_url('frameworks/font-awesome/css/font-awesome.min.css') }}" rel="stylesheet" />

        <!-- Other JS libraries -->
        <link  href="{{ static_url('frameworks/bootstrap-sortable/bootstrap-sortable.css') }}" rel="stylesheet" />
        <script src="{{ static_url('frameworks/bootstrap-sortable/bootstrap-sortable.js') }}"></script>

        <link  href="{{ static_url('frameworks/select2/select2.css') }}" rel="stylesheet" />
        <script src="{{ static_url('frameworks/select2/select2.min.js') }}"></script>

        <link  href="{{ static_url('frameworks/chardinjs/chardinjs.css') }}" rel="stylesheet" />
        <script src="{{ static_url('frameworks/chardinjs/chardinjs.min.js') }}"></script>

        <script src="{{ static_url('frameworks/autosize.min.js') }}"></script>
        <script src="{{ static_url('frameworks/date.js') }}"></script>
        <script src="{{ static_url('frameworks/bootstrap.file-input.js') }}"></script>

        <!-- bootstrap-markdown -->
        <link  href="{{ static_url('frameworks/bootstrap-markdown/bootstrap-markdown.min.css') }}" rel="stylesheet" />
        <script src="{{ static_url('frameworks/bootstrap-markdown/bootstrap-markdown.js') }}"></script>

        <!-- Google & Dropbox API's -->
        <script src="https://apis.google.com/js/api.js"></script>
        <script src="https://www.dropbox.com/static/api/1/dropbox.js" id="dropboxjs" data-app-key="h14c0u5pcjcdppt"></script>

        <!-- Entu CSS -->
        <link href="{{ static_url('css/screen.css') }}" rel="stylesheet" />
        <link href="{{ static_url('css/print.css') }}" rel="stylesheet" media="print" />

        <!-- View CSS -->
        <style type="text/css">
        {% block style %}{% end %}
        </style>

        <script>
            if (window.location.hash === '#_=_') {
                window.location.hash = ''
                location.reload()
            }
        </script>

        <!-- Google Analytics -->
        {% if google_analytics_code %}
            <script>
                (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

                ga('create', '{{ google_analytics_code }}', 'auto');
                ga('send', 'pageview');
            </script>
        {% end %}

        {% block head %}{% end %}

        {% if current_user %}
            <!-- Start of Async Drift Code -->
            <script>
                !function() {
                    var t;
                    if (t = window.driftt = window.drift = window.driftt || [], !t.init) return t.invoked ? void (window.console && console.error && console.error("Drift snippet included twice.")) : (t.invoked = !0,
                    t.methods = [ "identify", "track", "reset", "debug", "show", "ping", "page", "hide", "off", "on" ],
                    t.factory = function(e) {
                        return function() {
                            var n;
                            return n = Array.prototype.slice.call(arguments), n.unshift(e), t.push(n), t;
                        };
                    }, t.methods.forEach(function(e) {
                        t[e] = t.factory(e);
                    }), t.load = function(t) {
                        var e, n, o, r;
                        e = 3e5, r = Math.ceil(new Date() / e) * e, o = document.createElement("script"),
                        o.type = "text/javascript", o.async = !0, o.crossorigin = "anonymous", o.src = "https://js.driftt.com/include/" + r + "/" + t + ".js",
                        n = document.getElementsByTagName("script")[0], n.parentNode.insertBefore(o, n);
                    });
                }();
                drift.SNIPPET_VERSION = '0.2.0'
                drift.load('r6wuc9i56iv7')
                drift.identify("{{ current_user.get('email') }}", {
                    email: "{{ current_user.get('email') }}",
                    name: "{{ current_user.get('name') }}",
                    avatar_url: "{{ current_user.get('picture') }}",
                    companyId: "{{ app_organisation }}",
                    tags: [location.hostname.split('.')[0]]
                });
            </script>
        {% end %}
        <!-- End of Async Drift Code -->

        <!-- start Mixpanel -->
        <script type="text/javascript">
            (function(e,a){if(!a.__SV){var b=window;try{var c,l,i,j=b.location,g=j.hash;c=function(a,b){return(l=a.match(RegExp(b+"=([^&]*)")))?l[1]:null};g&&c(g,"state")&&(i=JSON.parse(decodeURIComponent(c(g,"state"))),"mpeditor"===i.action&&(b.sessionStorage.setItem("_mpcehash",g),history.replaceState(i.desiredHash||"",e.title,j.pathname+j.search)))}catch(m){}var k,h;window.mixpanel=a;a._i=[];a.init=function(b,c,f){function e(b,a){var c=a.split(".");2==c.length&&(b=b[c[0]],a=c[1]);b[a]=function(){b.push([a].concat(Array.prototype.slice.call(arguments,0)))}}var d=a;"undefined"!==typeof f?d=a[f]=[]:f="mixpanel";d.people=d.people||[];d.toString=function(b){var a="mixpanel";"mixpanel"!==f&&(a+="."+f);b||(a+=" (stub)");return a};d.people.toString=function(){return d.toString(1)+".people (stub)"};k="disable time_event track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config reset people.set people.set_once people.increment people.append people.union people.track_charge people.clear_charges people.delete_user".split(" ");for(h=0;h<k.length;h++)e(d,k[h]);a._i.push([b,c,f])};a.__SV=1.2;b=e.createElement("script");b.type="text/javascript";b.async=!0;b.src="undefined"!==typeof MIXPANEL_CUSTOM_LIB_URL?MIXPANEL_CUSTOM_LIB_URL:"file:"===e.location.protocol&&"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//)?"https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";c=e.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c)}})(document,window.mixpanel||[]);mixpanel.init("6c90a6927425e7062b45e67a1bba3f95");
        </script>
        {% if current_user %}
            <script type="text/javascript">
                mixpanel.identify("{{ current_user.get('email') }}");
                mixpanel.people.set({
                    "$email": "{{current_user.get('email') }}",
                    "$name": "{{ current_user.get('name') }}",
                    "$ip": "{{ current_user.get('ip') }}"
                });
            </script>
        {% end %}
        {% if app_organisation %}
            <script type="text/javascript">
                mixpanel.people.append({
                    "Customer": "{{ app_organisation }}"
                });
            </script>
        {% end %}
        <!-- end Mixpanel -->

    </head>
    <body>
        {% block navbar %}
        <div class="navbar navbar-fixed-top">
            <div class="navbar-inner">
                <div class="container{% block fluid %}{% end %}">
                    <ul class="nav pull-left">
                        <li><a class="brand" href="{% block logo_url %}{% end %}">{{ app_title }} <span>{{ app_organisation }}</span></a></li>
                    </ul>
                    {% block right_toolbar %}{% end %}
                </div>
            </div>
        </div>
        {% end %}

        {% block content %}
        {% end %}

        <div id="modal-box" class="modal fade" style="display:none;">
        </div>

        <script>
            function showHelp() {
                $('body').chardinJs('start');
            }

            $(document).ready(function(){
                if (navigator.userAgent.match(/iPad/i) || navigator.userAgent.match(/iPhone/i) || navigator.userAgent.match(/iPod/i)) $('.hideonmobile').hide();
            });
        </script>
    </body>
</html>
