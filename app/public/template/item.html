{% extends '../../main/template/index.html' %}
{% autoescape None %}

{% include 'start.html' %}

{% block public_content %}
    {% from operator import itemgetter %}
    <div class="pull-right" style="margin:0px 0px 20px 0px; width:120px; text-align:center; text-transform:uppercase; color:#B9B9B9; font-weight:bold;">
        <img src="{{ entity['displaypicture'] }}" id="entity_picture" class="" width="120" style="width:120px;" />
    </div>
    <h3 style="margin:0px 140px 8px 0px; line-height:23px;">{{ entity['displayname'] }}</h3>
    <div style="margin-right:140px;">
        <table class="table table-condensed">
            <tbody>
                {% for p in sorted(entity.get('properties', {}).values(), key=itemgetter('ordinal')) %}
                    {% if p.get('visible') and p.get('values') %}
                        <tr>
                            <th style="text-align:right; min-width:200px;">
                                {{ p['label'] }}
                            </th>
                            <td style="width:100%;">
                                {% if p['datatype'] == 'file' %}
                                    {% if sharing_key %}
                                        {{ '<br />'.join(['<a href="/api2/file-%s?key=%s">%s</a>' % (v['db_value'], sharing_key, v['value']) for v in p['values']]) }}
                                    {% else %}
                                        {{ '<br />'.join(['<a href="/api2/file-%s">%s</a>' % (v['db_value'], v['value']) for v in p['values']]) }}
                                    {% end %}
                                {% else %}
                                    {{ '<br />'.join(['%s' % v['value'] for v in p['values']]) }}
                                {% end %}
                            </td>
                        </tr>
                    {% end %}
                {% end %}
            </tbody>
        </table>
    </div>
{% end %}
